!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ng.common"),require("tslib"),require("ng.forms"),require("ngx-translate.core"),require("rxjs"),require("ionic.storage"),require("wako-app.mobile-sdk"),require("ng.core"),require("ionic.angular")):"function"==typeof define&&define.amd?define(["ng.common","tslib","ng.forms","ngx-translate.core","rxjs","ionic.storage","wako-app.mobile-sdk","ng.core","ionic.angular"],e):"object"==typeof exports?exports.plugin=e(require("ng.common"),require("tslib"),require("ng.forms"),require("ngx-translate.core"),require("rxjs"),require("ionic.storage"),require("wako-app.mobile-sdk"),require("ng.core"),require("ionic.angular")):t.plugin=e(t["ng.common"],t.tslib,t["ng.forms"],t["ngx-translate.core"],t.rxjs,t["ionic.storage"],t["wako-app.mobile-sdk"],t["ng.core"],t["ionic.angular"])}("undefined"!=typeof self?self:this,(function(t,e,n,r,o,i,s,c,u){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,(function(e){return t[e]}).bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}({0:function(t,e,n){t.exports=n("zUnb")},"0S4P":function(e,n){e.exports=t},"17wl":function(t,n){t.exports=e},"3xDq":function(t,e){t.exports=n},TGDj:function(t,e){t.exports=r},Vgaj:function(t,e){t.exports=o},Zr0N:function(t,e){t.exports=i},doF0:function(t,e){t.exports=s},vOrQ:function(t,e){t.exports=c},z1lQ:function(t,e){t.exports=u},zUnb:function(t,e,n){"use strict";n.r(e),n.d(e,"PluginModule",(function(){return lt}));var r=n("17wl"),o=n("0S4P"),i=n("z1lQ"),s=n("doF0"),c=n("TGDj");function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object(s.wakoLog)("plugin.my-plugin",t)}var a=n("vOrQ"),l=function(t){function e(e){var n=t.call(this)||this;return n.translate=e,n}return Object(r.__extends)(e,t),e.prototype.initialize=function(){u("plugin initialized")},e.prototype.afterInstall=function(){u("plugin installed")},e.prototype.afterUpdate=function(){u("plugin updated")},e.prototype.setTranslation=function(t,e){this.translate.setDefaultLang(t),this.translate.use(t),this.translate.setTranslation(t,e)},e.prototype.customAction=function(t,e){},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](c.TranslateService))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(s.PluginBaseService),p=function(){function t(t,e){this.toastCtrl=t,this.translateService=e}return t.prototype.simpleMessage=function(t,e,n,r){var o=this;void 0===n&&(n=2e3),void 0===r&&(r="top"),this.translateService.get(t,e).subscribe((function(t){o.toastCtrl.create({message:t,mode:"ios",position:r,duration:n}).then((function(t){t.present()}))}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](i.ToastController),a["\u0275\u0275inject"](c.TranslateService))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),f=n("Zr0N");function d(t){return"function"==typeof t}var h=!1,m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){h=t},get useDeprecatedSynchronousErrorHandling(){return h}};function b(t){setTimeout((function(){throw t}),0)}var y={closed:!0,next:function(t){},error:function(t){if(m.useDeprecatedSynchronousErrorHandling)throw t;b(t)},complete:function(){}},g=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function v(t){return null!==t&&"object"==typeof t}var S=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),_=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var i=0;i<n.length;++i)n[i].remove(this);if(d(r))try{r.call(this)}catch(u){e=u instanceof S?x(u.errors):[u]}if(g(o)){i=-1;for(var s=o.length;++i<s;){var c=o[i];if(v(c))try{c.unsubscribe()}catch(u){e=e||[],u instanceof S?e=e.concat(x(u.errors)):e.push(u)}}}if(e)throw new S(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof t){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function x(t){return t.reduce((function(t,e){return t.concat(e instanceof S?e.errors:e)}),[])}var w=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),I=function(t){function e(n,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=y;break;case 1:if(!n){i.destination=y;break}if("object"==typeof n){n instanceof e?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new E(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new E(i,n,r,o)}return i}return r.__extends(e,t),e.prototype[w]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(_),E=function(t){function e(e,n,r,o){var i,s=t.call(this)||this;s._parentSubscriber=e;var c=s;return d(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==y&&(d((c=Object.create(n)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=i,s._error=r,s._complete=o,s}return r.__extends(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;m.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=m.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):b(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;b(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};m.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),m.useDeprecatedSynchronousErrorHandling)throw n;b(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!m.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return m.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(b(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(I),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(I),O=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return r.__extends(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(I);function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var C=P(),k=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();var j=function(t){if(t&&"function"==typeof t[k])return i=t,function(t){var e=i[k]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((e=t)&&"number"==typeof e.length&&"function"!=typeof e)return o=t,function(t){for(var e=0,n=o.length;e<n&&!t.closed;e++)t.next(o[e]);t.complete()};var e;if(function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}(t))return r=t,function(t){return r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,b),t};if(t&&"function"==typeof t[C])return n=t,function(t){for(var e=n[C]();;){var r=e.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add((function(){e.return&&e.return()})),t};var n,r,o,i,s=v(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function T(t){return t}function D(t){return 0===t.length?T:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var A=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=function(t,e,n){if(t){if(t instanceof I)return t;if(t[w])return t[w]()}return t||e||n?new I(t,e,n):new I(y)}(t,e,n);if(o.add(r?r.call(o,this.source):this.source||m.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),m.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){m.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof I?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=B(e))((function(e,r){var o;o=n.subscribe((function(e){try{t(e)}catch(n){r(n),o&&o.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[k]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:D(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=B(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function B(t){if(t||(t=m.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function R(t,e,n,r,o){if(void 0===o&&(o=new O(t,n,r)),!o.closed)return e instanceof A?e.subscribe(o):j(e)(o)}function q(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(t,e))}}var V=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new K(t,this.project,this.thisArg))},t}(),K=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(I);var H=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new U(t,this.project))},t}(),U=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new O(this,e,n),i=this.destination;i.add(o),this.innerSubscription=R(this,t,void 0,void 0,o),this.innerSubscription!==o&&i.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e}(M);function F(t){return function(e){var n=new N(t),r=e.lift(n);return n.caught=r}}var N=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new z(t,this.selector,this.caught))},t}(),z=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return r.__extends(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new O(this,void 0,void 0);this.add(r);var o=R(this,n,void 0,void 0,r);o!==r&&this.add(o)}},e}(M),Y=n("Vgaj"),L=function(){function t(t){this.storage=t,this.omdbBaseUrl="http://www.omdbapi.com/?apikey=",this.tmdbBaseUrl="https://api.themoviedb.org/3/movie/"}return t.prototype.getRatings=function(t,e,n){var r=this,o=[];return this.getOMDBRatings(t,n).pipe(function t(e,n){return"function"==typeof n?function(r){return r.pipe(t((function(t,r){return(o=e(t,r),o instanceof A?o:new A(j(o))).pipe(q((function(e,o){return n(t,e,r,o)})));var o})))}:function(t){return t.lift(new H(e))}}((function(t){return t.Ratings.forEach((function(t){o.push({source:t.Source,value:t.Value})})),r.getTMDBRatings(e,n,o)})),F((function(t){return t instanceof s.WakoHttpError&&401===t.status&&console.log("OMDB API authorisation error"),r.getTMDBRatings(e,n,o)})))},t.prototype.getOMDBRatings=function(t,e){return s.WakoHttpRequestService.get(this.omdbBaseUrl+(t+"&i=")+e)},t.prototype.getTMDBRatings=function(t,e,n){return s.WakoHttpRequestService.get(this.tmdbBaseUrl+(e+"?api_key=")+t).pipe(q((function(t){return n.push({source:"TMDB",value:t.vote_average}),n})),F((function(t){if(t instanceof s.WakoHttpError&&401===t.status)return console.log("TMDB API authorisation error"),Object(Y.of)(n)})))},t.prototype.setAPI=function(t,e){this.storage.set(e,t)},t.prototype.getAPIKey=function(t){return this.storage.get(t)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](f.Storage))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function $(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ion-card-content"),a["\u0275\u0275elementStart"](1,"ion-button"),a["\u0275\u0275text"](2," Open on Imdb "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function Q(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ion-card-content"),a["\u0275\u0275elementStart"](1,"ion-button"),a["\u0275\u0275text"](2," Open on Imdb "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function W(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ion-card-content"),a["\u0275\u0275element"](1,"ion-button"),a["\u0275\u0275elementEnd"]())}var G=function(){function t(t,e,n){this.modalCtrl=t,this.toastService=e,this.omdbService=n,this.ratings=[]}return t.prototype.ngOnInit=function(){this.toastService.simpleMessage("openMedia",{imdbId:this.movie?this.movie.imdbId:this.show.imdbId})},t.prototype.dismiss=function(){this.modalCtrl.dismiss()},t.prototype.openImdb=function(t){s.BrowserService.open("http://www.imdb.com/title/"+t+"/")},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](i.ModalController),a["\u0275\u0275directiveInject"](p),a["\u0275\u0275directiveInject"](L))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["app-media-modal"]],decls:13,vars:4,consts:[["slot","end"],["color","light",3,"click"],["name","close"],[4,"ngIf"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ion-header"),a["\u0275\u0275elementStart"](1,"ion-toolbar"),a["\u0275\u0275elementStart"](2,"ion-title"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"ion-buttons",0),a["\u0275\u0275elementStart"](5,"ion-button",1),a["\u0275\u0275listener"]("click",(function(){return e.dismiss()})),a["\u0275\u0275element"](6,"ion-icon",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"ion-content"),a["\u0275\u0275elementStart"](8,"ion-card"),a["\u0275\u0275template"](9,$,3,0,"ion-card-content",3),a["\u0275\u0275template"](10,Q,3,0,"ion-card-content",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"ion-card"),a["\u0275\u0275template"](12,W,2,0,"ion-card-content",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",e.movie?e.movie.title:e.show.title+" "+e.episode.code," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.movie),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.show),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.movie))},directives:[i.IonHeader,i.IonToolbar,i.IonTitle,i.IonButtons,i.IonButton,i.IonIcon,i.IonContent,i.IonCard,o.NgIf,i.IonCardContent],styles:[".icon-img[_ngcontent-%COMP%]{height:10px}.caption-txt[_ngcontent-%COMP%]{font-size:5px;font-weight:700}"]}),t}();function Z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"figure"),a["\u0275\u0275element"](1,"img",3),a["\u0275\u0275elementStart"](2,"figcaption",4),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.value)}}function J(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"figure"),a["\u0275\u0275element"](1,"img",5),a["\u0275\u0275elementStart"](2,"figcaption",4),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.value)}}function X(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"figure"),a["\u0275\u0275element"](1,"img",6),a["\u0275\u0275elementStart"](2,"figcaption",4),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.value)}}function tt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"figure"),a["\u0275\u0275element"](1,"img",7),a["\u0275\u0275elementStart"](2,"figcaption",4),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.value)}}function et(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,Z,4,1,"figure",2),a["\u0275\u0275template"](2,J,4,1,"figure",2),a["\u0275\u0275template"](3,X,4,1,"figure",2),a["\u0275\u0275template"](4,tt,4,1,"figure",2),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Metacritic"===n.source),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Rotten Tomatoes"===n.source),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Internet Movie Database"===n.source),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","TMDB"===n.source)}}var nt=function(t){function e(e,n){var r=t.call(this)||this;return r.modalCtrl=e,r.omdbService=n,r.ratings=[],r.hasError=!1,r.errorDetails="",r}return Object(r.__extends)(e,t),e.prototype.ngOnInit=function(){this.getRatings(this.movie.imdbId)},e.prototype.getRatings=function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,n,o=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.omdbService.getAPIKey("storedOMDBAPIkey")];case 1:return e=r.sent(),[4,this.omdbService.getAPIKey("storedTMDBAPIkey")];case 2:return n=r.sent(),this.omdbService.getRatings(e,n,t).subscribe((function(t){console.log("Component"),console.log(t),o.ratings=t}),(function(t){console.log(t)})),[2]}}))}))},e.prototype.transform=function(t){console.log(t);var e=!1,n=!1,r=!1;return t.forEach((function(t){"Internet Movie Database"==t.source?e=!0:"Rotten Tomatoes"==t.source?n=!0:"Metacritic"==t.source&&(r=!0)})),e||t.push({source:"Internet Movie Database",value:"--"}),n||t.push({source:"Rotten Tomatoes",value:"--"}),r||t.push({source:"Metacritic",value:"--"}),t},e.prototype.setMovie=function(t){this.movie=t},e.prototype.openMovie=function(){this.modalCtrl.create({component:G,componentProps:{movie:this.movie}}).then((function(t){t.present()}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.ModalController),a["\u0275\u0275directiveInject"](L))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[["expand","block","color","custom"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","metacritic","src","https://upload.wikimedia.org/wikipedia/commons/2/20/Metacritic.svg",1,"icon-img"],[1,"caption-txt"],["alt","rotten tomatoes","src","https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Rotten_Tomatoes.svg/209px-Rotten_Tomatoes.svg.png",1,"icon-img"],["alt","IMDb","src","https://upload.wikimedia.org/wikipedia/commons/6/6a/New-imdb-logo.png",1,"icon-img"],["alt","TMDb","src","https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/Tmdb.new.logo.svg/512px-Tmdb.new.logo.svg.png",1,"icon-img"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"ion-tab-bar",0),a["\u0275\u0275template"](2,et,5,4,"div",1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.ratings))},directives:[i.IonTabBar,o.NgForOf,o.NgIf],styles:["ion-button[_ngcontent-%COMP%]{background-color:grey!important;border-radius:5px}.icon-img[_ngcontent-%COMP%]{height:15px}.caption-txt[_ngcontent-%COMP%]{font-size:10px;font-weight:700;color:#fff}figure[_ngcontent-%COMP%]{margin:30px}"]}),e}(s.MovieDetailBaseComponent),rt=n("3xDq"),ot=function(){function t(t){this.omdbService=t}return t.prototype.ngOnInit=function(){var t=this;this.omdbService.getAPIKey("storedOMDBAPIkey").then((function(e){t.omdbAPIKeyValue=e})),this.omdbService.getAPIKey("storedTMDBAPIkey").then((function(e){t.tmdbAPIKeyValue=e}))},t.prototype.onOMDBAPISubmit=function(){this.omdbService.setAPI(this.omdbAPIKeyValue,"storedOMDBAPIkey")},t.prototype.onTMDBAPISubmit=function(){this.omdbService.setAPI(this.tmdbAPIKeyValue,"storedTMDBAPIkey")},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](L))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["app-api-providers"]],decls:17,vars:2,consts:[["value","","placeholder","Enter OMDB API Key",3,"ngModel","ngModelChange"],[3,"click"],["value","","placeholder","Enter TMDB API Key",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ion-content"),a["\u0275\u0275elementStart"](1,"ion-card"),a["\u0275\u0275elementStart"](2,"ion-card-content"),a["\u0275\u0275elementStart"](3,"ion-card-content"),a["\u0275\u0275text"](4,"OMDB API Key"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"ion-item"),a["\u0275\u0275elementStart"](6,"ion-input",0),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.omdbAPIKeyValue=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"ion-button",1),a["\u0275\u0275listener"]("click",(function(){return e.onOMDBAPISubmit()})),a["\u0275\u0275text"](8,"Submit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"ion-card"),a["\u0275\u0275elementStart"](10,"ion-card-content"),a["\u0275\u0275elementStart"](11,"ion-card-content"),a["\u0275\u0275text"](12,"TMDB API Key (v3)"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"ion-item"),a["\u0275\u0275elementStart"](14,"ion-input",2),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.tmdbAPIKeyValue=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"ion-button",1),a["\u0275\u0275listener"]("click",(function(){return e.onTMDBAPISubmit()})),a["\u0275\u0275text"](16,"Submit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",e.omdbAPIKeyValue),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngModel",e.tmdbAPIKeyValue))},directives:[i.IonContent,i.IonCard,i.IonCardContent,i.IonItem,i.IonInput,i.TextValueAccessor,rt.NgControlStatus,rt.NgModel,i.IonButton],styles:[""]}),t}(),it=function(){function t(t){this.translate=t}return t.prototype.ngOnInit=function(){u("Current lang",this.translate.currentLang),u("Test instant translate",this.translate.instant("settings.title"))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.TranslateService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&a["\u0275\u0275element"](0,"app-api-providers")},directives:[ot],styles:[""]}),t}(),st=function(t){function e(e){var n=t.call(this)||this;return n.modalCtrl=e,n}return Object(r.__extends)(e,t),e.prototype.setShowEpisode=function(t,e){this.show=t,this.episode=e},e.prototype.openEpisode=function(){this.modalCtrl.create({component:G,componentProps:{show:this.show,episode:this.episode}}).then((function(t){t.present()}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.ModalController))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[["expand","block","color","custom",3,"click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ion-button",0),a["\u0275\u0275listener"]("click",(function(){return e.openEpisode()})),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate2"](" Show : ",e.show.title," - Episode ",e.episode.code," "))},directives:[i.IonButton],styles:["ion-button[_ngcontent-%COMP%]{background-color:#d26a1f!important;border-radius:5px}"]}),e}(s.EpisodeDetailBaseComponent),ct=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["app-plugin-detail"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t}(),ut=function(t){function e(e){var n=t.call(this)||this;return n.toastService=e,n}return Object(r.__extends)(e,t),e.prototype.setShowEpisode=function(t,e){this.show=t,this.episode=e},e.prototype.openEpisode=function(){this.toastService.simpleMessage("Click on episode: "+this.episode.title)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:0,consts:[[1,"ion-item-options"],[3,"click"],[1,"ion-item-detail"],["name","beer-outline"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"ion-item-option",1),a["\u0275\u0275listener"]("click",(function(){return e.openEpisode()})),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275element"](3,"ion-icon",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())},directives:[i.IonItemOption,i.IonIcon],styles:["ion-button[_ngcontent-%COMP%]{background-color:#d26a1f!important;border-radius:5px}.ion-item-options[_ngcontent-%COMP%]{display:flex;height:100%}.ion-item-options[_ngcontent-%COMP%]   .ion-item-detail[_ngcontent-%COMP%]{width:60px;display:grid;text-align:center}.ion-item-options[_ngcontent-%COMP%]   .ion-item-detail[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2em;width:100%}.ion-item-options[_ngcontent-%COMP%]   .ion-item-detail[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{margin-top:3px;font-size:8px;text-transform:none}"]}),e}(s.EpisodeDetailBaseComponent),at=function(t){function e(e){var n=t.call(this)||this;return n.toastService=e,n}return Object(r.__extends)(e,t),e.prototype.setShow=function(t){this.show=t},e.prototype.clickShow=function(){var t=this;s.KodiAppService.checkAndConnectToCurrentHost().pipe(F((function(e){return u("Error on kodi",e),t.toastService.simpleMessage("hostUnreachable"===e?"My Addon: Your kodi host is unreachable":"My Addon: You must add a kodi host"),Y.NEVER}))).subscribe((function(){var e="plugin://plugin.video.youtube/?action=play_video&videoid="+new URLSearchParams(t.show.trailer.split("?")[1]).get("v");u("Opening URL",e),s.KodiPlayerOpenForm.submit(e).subscribe()}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:0,consts:[["expand","block","color","custom",3,"click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ion-button",0),a["\u0275\u0275listener"]("click",(function(){return e.clickShow()})),a["\u0275\u0275text"](1," Open trailer on kodi\n"),a["\u0275\u0275elementEnd"]())},directives:[i.IonButton],styles:["ion-button[_ngcontent-%COMP%]{background-color:#d20012!important;border-radius:5px}"]}),e}(s.ShowDetailBaseComponent),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.pluginService=l,e.settingsComponent=it,e.movieComponent=nt,e.episodeComponent=st,e.episodeItemOptionComponent=ut,e.showComponent=at,e.pluginDetailComponent=ct,e.apiProvidersComponent=ot,e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return pt(t||e)},providers:[l,p,L],imports:[[o.CommonModule,rt.FormsModule,i.IonicModule.forRoot(),c.TranslateModule.forRoot()]]}),e}(s.PluginBaseModule),pt=a["\u0275\u0275getInheritedFactory"](lt);e.default=lt}})}));